(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1501:function(e,a,t){"use strict";var n=t(1),l=t.n(n),s=t(259),c=t(1389),i=t(1301),r=t(45),o=t.n(r),m=t(1163),d=t.n(m),u=t(1359),p=t(1314),g=t(1316),y=t(1416),E=t(1411),h=t(1493),f=t(1305),A=t(1332),b=t(1454),T=t.n(b),C=t(1334),v=t(1300),k=t(1365),S=t(18),I=t(1327),O=t(1372),N=t(1216),w=t(1168),D=t.n(w),P=t(132),K=t(260),M=t(981),x=t(931);var R=Object(x.a)(e=>({centerItems:{margin:"auto"},tryoutHeading:{marginTop:e.spacing(1),fontWeight:400},menuItem:{color:e.palette.getContrastText(e.palette.background.paper)}}))(e=>{let{selectedApplication:a,selectedKeyType:t}=e;const{subscriptions:n,handleChanges:r,classes:o}=e,m=e=>{const{target:n}=e,{name:l,value:s}=n;switch(l){case"selectedApplication":a=s;break;case"selectedKeyType":t=s}r(e)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(c.a,{x:12,md:6,className:o.centerItems},l.a.createElement(p.a,{fullWidth:!0,id:"selected-application",select:!0,label:l.a.createElement(s.a,{defaultMessage:"Applications",id:"Apis.Details.ApiConsole.SelectAppPanel.applications"}),value:a,name:"selectedApplication",onChange:m,SelectProps:n,helperText:l.a.createElement(s.a,{defaultMessage:"Subscribed applications",id:"Apis.Details.ApiConsole.SelectAppPanel.select.subscribed.application"}),margin:"normal",variant:"outlined"},n.map(e=>l.a.createElement(I.a,{value:e.applicationInfo.applicationId,key:e.applicationInfo.applicationId,className:o.menuItem},e.applicationInfo.name)))),l.a.createElement(c.a,{x:12,md:6,className:o.centerItems},l.a.createElement(i.a,{variant:"h6",component:"h4",color:"textSecondary",className:o.tryoutHeading},l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.SelectAppPanel.select.key.type.heading",defaultMessage:"Key Type"})),l.a.createElement(g.a,{component:"fieldKeyType"},l.a.createElement(y.a,{name:"selectedKeyType",value:t,onChange:m,row:!0},null!==n&&("UNBLOCKED"===n.find(e=>e.applicationId===a).status||"TIER_UPDATE_PENDING"===n.find(e=>e.applicationId===a).status)&&l.a.createElement(E.a,{value:"PRODUCTION",control:l.a.createElement(h.a,null),label:l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.SelectAppPanel.production.radio",defaultMessage:"Production"})}),l.a.createElement(E.a,{value:"SANDBOX",control:l.a.createElement(h.a,null),label:l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.SelectAppPanel.sandbox.radio",defaultMessage:"Sandbox"})})))))});const U=Object(u.a)(e=>({centerItems:{margin:"auto"},tokenType:{margin:"auto",display:"flex","& .MuiButton-contained.Mui-disabled span.MuiButton-label":{color:"#6d6d6d"}},paper:{margin:e.spacing(1),padding:e.spacing(1)},grid:{marginTop:e.spacing(4),marginBottom:e.spacing(4),paddingRight:e.spacing(2),justifyContent:"center"},tryoutHeading:{fontWeight:400},genKeyButton:{width:e.spacing(20),height:e.spacing(5),marginTop:e.spacing(2.5),marginLeft:e.spacing(2),"&:disabled":{cursor:"not-allowed",background:e.palette.grey[50]}},gatewayEnvironment:{marginTop:e.spacing(4)},categoryHeading:{marginBottom:e.spacing(2),marginLeft:e.spacing(-5)},tooltip:{marginLeft:e.spacing(1)},menuItem:{color:e.palette.getContrastText(e.palette.background.paper)},warningIcon:{color:"#ff9a00",fontSize:25,marginRight:10}}));function B(e){const{securitySchemeType:a,selectedEnvironment:t,environments:r,containerMngEnvironments:o,labels:m,productionAccessToken:d,sandboxAccessToken:u,selectedKeyType:b,setKeys:w,setSelectedKeyType:x,setSelectedKeyManager:B,setSelectedEnvironment:j,setProductionAccessToken:L,setSandboxAccessToken:H,scopes:_,setSecurityScheme:G,setUsername:Y,setPassword:W,username:F,password:X,updateSwagger:q,setProductionApiKey:z,setSandboxApiKey:$,productionApiKey:J,sandboxApiKey:Q,environmentObject:V,setURLs:Z,api:ee}=e;let{selectedKeyManager:ae}=e;ae=ae||"Resident Key Manager";const te=U(),[ne,le]=Object(n.useState)(!1),[se,ce]=Object(n.useState)(!1),[ie,re]=Object(n.useState)(!1),[oe,me]=Object(n.useState)([]),[de,ue]=Object(n.useState)([]),[pe,ge]=Object(n.useState)([]),[ye,Ee]=Object(n.useState)(null),[he,fe]=Object(n.useState)(!1),Ae=ee.id,be=new K.a;function Te(e){const{target:t}=e,{name:n,value:l}=t;switch(n){case"selectedEnvironment":if(j(l,!0),"GRAPHQL"!==ee.type&&q(l),V){const e=V.find(e=>l===e.environmentName).URLs;Z(e)}break;case"selectedApplication":L(""),H(""),z(""),$(""),ue(l);break;case"selectedKeyManager":B(l,!0,de);break;case"selectedKeyType":x(l,!d||!u,de);break;case"securityScheme":G(l);break;case"username":Y(l);break;case"password":W(l);break;case"accessToken":"API-KEY"===a&&"PRODUCTION"===b?z(l):"API-KEY"===a&&"SANDBOX"===b?$(l):"PRODUCTION"===b?L(l):H(l)}}Object(n.useEffect)(()=>{let e,a,n,l="PRODUCTION";if(ee.lifeCycleStatus&&"prototyped"!==ee.lifeCycleStatus.toLowerCase()){be.getSubscriptions(Ae).then(s=>{null!==s&&(e=s.obj.list.filter(e=>"UNBLOCKED"===e.status||"PROD_ONLY_BLOCKED"===e.status||"TIER_UPDATE_PENDING"===e.status))&&e.length>0?(a=e[0].applicationId,M.a.get(a).then(e=>e.getKeys()).then(s=>{s.get(ae)&&"SANDBOX"===s.get(ae).keyType?(l="SANDBOX",({accessToken:n}=s.get(ae).token)):s.get(ae)&&"PRODUCTION"===s.get(ae).keyType&&(l="PRODUCTION",({accessToken:n}=s.get(ae).token)),ue(a),me(e),w(s),j(t,!1),x(l,!1),"PRODUCTION"===b?L(n):H(n)})):(ue(a),me(e),w(void 0),j(t,!1),"PRODUCTION"===b?L(n):H(n),x(b,!1))}).catch(e=>{const{status:a}=e;404===a&&re(!0)}),be.getKeyManagers().then(e=>{const a=[];e.body.list.map(e=>a.push(e)),ge(a);const t=a.filter(e=>e.name===ae);t&&t.length>0&&Ee(t[0])}).catch(e=>{const{status:a}=e;404===a&&re(!0)})}},[]),Object(n.useEffect)(()=>{!function(){if(ee.lifeCycleStatus&&"prototyped"!==ee.lifeCycleStatus.toLowerCase()){let e,a;null!==oe&&0!==oe.length&&0!==de.length&&("PROD_ONLY_BLOCKED"===oe.find(e=>e.applicationId===de).status?(x(b,!1),a="SANDBOX"):a=b),M.a.get(de).then(e=>e.getKeys(a||"PRODUCTION")).then(a=>{const t=a.get(ae);t&&t.keyType===b&&({accessToken:e}=t.token),t&&"PRODUCTION"===t.keyType?L(e):t&&"SANDBOX"===t.keyType&&H(e),t&&t.consumerKey&&""!==t.consumerKey?fe(!0):fe(!1),w(a)})}}()},[de,b,t,a]);const Ce=S.a.getUser();if(null==ee)return l.a.createElement(P.a,null);if(ie)return"API Not found !";let ve=!1,ke=!1,Se=!1,Ie=!1,Oe=ee.authorizationHeader?ee.authorizationHeader:"Authorization",Ne="Bearer";ee&&ee.securityScheme&&(ve=ee.securityScheme.includes("api_key"),ke=ee.securityScheme.includes("basic_auth"),Se=ee.securityScheme.includes("oauth2"),Ie=ee.securityScheme.includes("test_auth"),ve&&"API-KEY"===a&&(Oe="apikey",Ne=""),Ie&&"TEST"===a&&(Oe="testKey",Ne=""));const we=ee.lifeCycleStatus&&"prototyped"===ee.lifeCycleStatus.toLowerCase(),De="published"===ee.lifeCycleStatus.toLowerCase()||we&&!0===ee.enableStore;let Pe="";Pe="API-KEY"===a?"PRODUCTION"===b?J:Q:"PRODUCTION"===b?d:u;const Ke=[];o&&o.filter(e=>e.clusterDetails.length>0).forEach(e=>{Ke.push(l.a.createElement(I.a,{value:"",disabled:!0,className:te.menuItem},l.a.createElement("em",null,e.deploymentEnvironmentName))),e.clusterDetails.forEach(e=>{Ke.push(l.a.createElement(I.a,{value:e.clusterName,key:e.clusterName,className:te.menuItem},e.clusterDisplayName))})});const Me=`${Oe}: ${Ne}`;return l.a.createElement(l.a.Fragment,null,l.a.createElement(c.a,{x:12,md:6,className:te.centerItems},l.a.createElement(N.a,null,"TEST"!==a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a,{variant:"h5",component:"h3",color:"textPrimary",className:te.categoryHeading},l.a.createElement(s.a,{id:"api.console.security.heading",defaultMessage:"Security"})),l.a.createElement(N.a,{mb:1},l.a.createElement(i.a,{variant:"body1"},l.a.createElement(N.a,{display:"flex",alignItems:"center"},ye&&ye.enabled&&l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.TryOutController.default.km.msg.one",defaultMessage:"The Resident Key Manager is selected for try out console."}),ye&&!ye.enabled&&l.a.createElement(l.a.Fragment,null,l.a.createElement(D.a,{className:te.warningIcon}),l.a.createElement("div",null,l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.TryOutController.default.km.msg.two",defaultMessage:"Try it console is only accessible via the default key manager.But the default key manager is disabled at the moment."}))),ye&&0===ye.length&&l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.TryOutController.default.km.msg.three",defaultMessage:"Try it console is only accessible via the default key manager.Something went wrong while selecting the default Key manager."})))),l.a.createElement(i.a,{variant:"h6",component:"h4",color:"textSecondary",className:te.tryoutHeading},l.a.createElement(s.a,{id:"api.console.security.type.heading",defaultMessage:"Security Type"}))),(ve||ke||Se)&&De&&l.a.createElement(g.a,{component:"fieldset"},l.a.createElement(y.a,{name:"securityScheme",value:a,onChange:Te,row:!0},l.a.createElement(E.a,{value:"OAUTH",disabled:!Se,control:l.a.createElement(h.a,null),label:l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.security.scheme.oauth",defaultMessage:"OAuth"})}),l.a.createElement(E.a,{value:"API-KEY",disabled:!ve,control:l.a.createElement(h.a,null),label:l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.security.scheme.apikey",defaultMessage:"API Key"})}),l.a.createElement(E.a,{value:"BASIC",disabled:!ke,control:l.a.createElement(h.a,null),label:l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.security.scheme.basic",defaultMessage:"Basic"})}))))),!we&&l.a.createElement(c.a,{xs:12,md:12,item:!0},l.a.createElement(N.a,{display:"block"},Ce&&oe&&oe.length>0&&"BASIC"!==a&&"TEST"!==a&&l.a.createElement(R,{subscriptions:oe,handleChanges:Te,selectedApplication:de,selectedKeyManager:ae,selectedKeyType:b,keyManagers:pe}),oe&&0===oe.length&&"TEST"!==a?l.a.createElement(c.a,{x:8,md:6,className:te.tokenType,item:!0},l.a.createElement(N.a,{mb:1,alignItems:"center"},l.a.createElement(i.a,{variant:"body1"},l.a.createElement(N.a,{display:"flex"},l.a.createElement(D.a,{className:te.warningIcon}),l.a.createElement("div",null,l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.ApiConsole.subscribe.to.application",defaultMessage:"Please subscribe to an application"})))))):!he&&"OAUTH"===a&&l.a.createElement(c.a,{x:8,md:6,className:te.tokenType,item:!0},l.a.createElement(N.a,{mb:1,alignItems:"center"},l.a.createElement(i.a,{variant:"body1"},l.a.createElement(N.a,{display:"flex"},l.a.createElement(D.a,{className:te.warningIcon}),l.a.createElement("div",null,l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.ApiConsole.keys.not.generated",defaultMessage:"Consumer key and secret not generated for the selected application on the {what} environment. ",values:{what:b}})))))),l.a.createElement(N.a,{display:"block",justifyContent:"center"},l.a.createElement(c.a,{x:8,md:6,className:te.tokenType,item:!0},"BASIC"===a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(c.a,{x:12,md:12,item:!0},l.a.createElement(p.a,{margin:"normal",variant:"outlined",label:l.a.createElement(s.a,{id:"username",defaultMessage:"Username"}),name:"username",onChange:Te,value:F||"",fullWidth:!0}),l.a.createElement(p.a,{margin:"normal",variant:"outlined",label:l.a.createElement(s.a,{id:"password",defaultMessage:"Password"}),name:"password",onChange:Te,value:X||"",fullWidth:!0,InputProps:{autoComplete:"new-password"}}))),"BASIC"!==a&&"TEST"!==a&&l.a.createElement(p.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:l.a.createElement(s.a,{id:"access.token",defaultMessage:"Access Token"}),name:"accessToken",onChange:Te,type:ne?"text":"password",value:Pe||"",helperText:l.a.createElement(s.a,{id:"enter.access.token",defaultMessage:"Enter access Token"}),id:"accessTokenInput",InputProps:{autoComplete:"new-password",endAdornment:l.a.createElement(v.a,{position:"end"},l.a.createElement(C.a,{edge:"end","aria-label":"Toggle token visibility",onClick:function(){le(!ne)}},ne?l.a.createElement(k.a,null,"visibility_off"):l.a.createElement(k.a,null,"visibility"))),startAdornment:l.a.createElement(v.a,{style:{minWidth:7*Me.length},position:"start"},`${Oe}: ${Ne}`)}}),"BASIC"!==a&&"TEST"!==a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(O.a,{onClick:"API-KEY"===a?function(){if(ee.lifeCycleStatus&&"prototyped"!==ee.lifeCycleStatus.toLowerCase()){ce(!0),be.generateApiKey(de,b,-1).then(e=>{console.log("Non empty response received",e),le(!1),"PRODUCTION"===b?z(e.body.apikey):$(e.body.apikey),ce(!1)}).catch(e=>{console.log(e);const{status:a}=e;404===a&&re(!0),ce(!1)})}}:function(){if(ee.lifeCycleStatus&&"prototyped"!==ee.lifeCycleStatus.toLowerCase()){ce(!0),M.a.get(de).then(e=>e.generateToken(ae,b,3600,_)).then(e=>{console.log("token generated successfully "+e),le(!1),"PRODUCTION"===b?L(e.accessToken):H(e.accessToken),ce(!1)}).catch(e=>{console.error(e);const{status:a}=e;404===a&&re(!0),ce(!1)})}},variant:"contained",className:te.genKeyButton,disabled:!Ce||oe&&0===oe.length||!he&&"OAUTH"===a},se&&l.a.createElement(f.a,{size:15}),l.a.createElement(s.a,{id:"Apis.Details.ApiCOnsole.generate.test.key",defaultMessage:"GET TEST KEY "})),l.a.createElement(A.a,{placement:"right",interactive:!0,title:l.a.createElement(s.a,{id:"Apis.Details.TryOutConsole.access.token.tooltip",defaultMessage:"You can use your existing Access Token or you can generate a new Test Key."})},l.a.createElement(N.a,{m:1,mt:2},l.a.createElement(C.a,{"aria-label":"Use existing Access Token or generate a new Test Key"},l.a.createElement(T.a,null))))))),l.a.createElement(N.a,{display:"flex",justifyContent:"center",className:te.gatewayEnvironment},l.a.createElement(c.a,{xs:12,md:6,item:!0},(r&&r.length>0||Ke.length>0||m&&m.length>0)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a,{variant:"h5",component:"h3",color:"textPrimary",className:te.categoryHeading},l.a.createElement(s.a,{id:"api.console.gateway.heading",defaultMessage:"Gateway"})),l.a.createElement(p.a,{fullWidth:!0,select:!0,label:l.a.createElement(s.a,{defaultMessage:"Environment",id:"Apis.Details.ApiConsole.environment"}),value:t||r&&r[0],name:"selectedEnvironment",onChange:Te,helperText:l.a.createElement(s.a,{defaultMessage:"Please select an environment",id:"Apis.Details.ApiConsole.SelectAppPanel.environment"}),margin:"normal",variant:"outlined"},r&&r.length>0&&l.a.createElement(I.a,{value:"",disabled:!0,className:te.menuItem},l.a.createElement("em",null,l.a.createElement(s.a,{id:"api.gateways",defaultMessage:"API Gateways"}))),r&&r.map(e=>l.a.createElement(I.a,{value:e,key:e,className:te.menuItem},e)),Ke,m&&m.length>0&&l.a.createElement(I.a,{value:"",disabled:!0},l.a.createElement("em",null,l.a.createElement(s.a,{id:"gateways",defaultMessage:"Gateways",className:te.menuItem}))),m&&m.map(e=>l.a.createElement(I.a,{value:e,key:e,className:te.menuItem},e)))))))),we&&!ee.enableStore&&l.a.createElement(N.a,{display:"flex",justifyContent:"center",className:te.gatewayEnvironment},l.a.createElement(c.a,{xs:12,md:6,item:!0},(r&&r.length>0||Ke.length>0||m&&m.length>0)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a,{variant:"h5",component:"h3",color:"textPrimary",className:te.categoryHeading},l.a.createElement(s.a,{id:"api.console.gateway.heading",defaultMessage:"Gateway"})),l.a.createElement(p.a,{fullWidth:!0,select:!0,label:l.a.createElement(s.a,{defaultMessage:"Environment",id:"Apis.Details.ApiConsole.environment"}),value:t||r&&r[0],name:"selectedEnvironment",onChange:Te,helperText:l.a.createElement(s.a,{defaultMessage:"Please select an environment",id:"Apis.Details.ApiConsole.SelectAppPanel.environment"}),margin:"normal",variant:"outlined"},r&&r.length>0&&l.a.createElement(I.a,{value:"",disabled:!0,className:te.menuItem},l.a.createElement("em",null,l.a.createElement(s.a,{id:"api.gateways",defaultMessage:"API Gateways"}))),r&&r.map(e=>l.a.createElement(I.a,{value:e,key:e,className:te.menuItem},e)),Ke,m&&m.length>0&&l.a.createElement(I.a,{value:"",disabled:!0},l.a.createElement("em",null,l.a.createElement(s.a,{id:"gateways",defaultMessage:"Gateways",className:te.menuItem}))),m&&m.map(e=>l.a.createElement(I.a,{value:e,key:e,className:te.menuItem},e)))))))}B.propTypes={classes:o.a.shape({paper:o.a.string.isRequired,grid:o.a.string.isRequired,inputAdornmentStart:o.a.string.isRequired,centerItems:o.a.string.isRequired}).isRequired};a.a=d()(u.a)(B)}}]);
//# sourceMappingURL=APIConsole~GraphQLConsole.be3671bd73c917e3b427.bundle.js.map