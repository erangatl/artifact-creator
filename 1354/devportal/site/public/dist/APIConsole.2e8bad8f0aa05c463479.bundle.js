(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1831:function(e,t){},1833:function(e,t){},2045:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),i=s(259),r=s(1389),o=s(1301),c=s(45),d=s.n(c),l=s(931),p=s(1365),u=s(18),h=s(1323),g=s(1231),y=s.n(g),m=s(951),S=s(132),b=s(260),A=(s(1667),s(1669)),T=s.n(A);const k=function(){return{wrapComponents:{info:()=>()=>null,authorizeBtn:()=>()=>null}}},P=e=>{const{spec:t,accessTokenProvider:s,authorizationHeader:i,api:r,securitySchemeType:o}=e,c={spec:t,validatorUrl:null,defaultModelsExpandDepth:-1,docExpansion:"list",requestInterceptor:e=>{const{url:t}=e,{context:n}=r,a=`${n}/*`;if(e.headers[i]="apikey"===i?s():"BASIC"===o?"Basic "+s():"TEST"===o?s():"Bearer "+s(),t.endsWith(a))e.url=t.substring(0,t.length-2);else if(t.includes(a+"?")){const s=t.split("/*?");e.url=s.length>1?s[0]+"?"+s[1]:s[0]}return e},defaultModelExpandDepth:-1,plugins:[k]},[d,l]=Object(n.useState)(),[p,u]=Object(n.useState)();return Object(n.useEffect)(()=>{if(!p)return;const e=document.querySelectorAll(".opblock .authorization__btn");let t=0;for(;t<e.length;t++)e[t].remove();document.querySelector(".schemes select").setAttribute("id","schemes"),document.getElementById("unlocked").parentNode.parentNode.remove(),u(!1)},[p]),Object(n.useEffect)(()=>{u(!0)},[d]),a.a.createElement(a.a.Fragment,null,a.a.createElement(T.a,c),l)};P.propTypes={accessTokenProvider:d.a.func.isRequired,authorizationHeader:d.a.string.isRequired,api:d.a.shape({context:d.a.string.isRequired}).isRequired,spec:d.a.string.isRequired};var f=P,w=s(1501),K=s(981);function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function I(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class v extends a.a.Component{constructor(e){super(e),this.state={securitySchemeType:"OAUTH",username:"",password:"",scopes:[],selectedKeyType:"PRODUCTION",keys:[],productionApiKey:"",sandboxApiKey:"",selectedKeyManager:"Resident Key Manager"},this.accessTokenProvider=this.accessTokenProvider.bind(this),this.updateSwagger=this.updateSwagger.bind(this),this.setSecurityScheme=this.setSecurityScheme.bind(this),this.setSelectedEnvironment=this.setSelectedEnvironment.bind(this),this.setProductionAccessToken=this.setProductionAccessToken.bind(this),this.setSandboxAccessToken=this.setSandboxAccessToken.bind(this),this.setUsername=this.setUsername.bind(this),this.setPassword=this.setPassword.bind(this),this.setSelectedKeyType=this.setSelectedKeyType.bind(this),this.setSectedKeyManager=this.setSelectedKeyManager.bind(this),this.setKeys=this.setKeys.bind(this),this.updateAccessToken=this.updateAccessToken.bind(this),this.setProductionApiKey=this.setProductionApiKey.bind(this),this.setSandboxApiKey=this.setSandboxApiKey.bind(this)}componentDidMount(){const{api:e}=this.context,t=e.id,s=u.a.getUser();let n,a,i,r,o,c;this.apiClient=new b.a,this.apiClient.getAPIById(t).then(e=>{if((n=e.obj).endpointURLs&&(a=n.endpointURLs.map(e=>e.environmentName)),i=n.ingressURLs,n.labels&&(r=n.labels.map(e=>e.name)),n.scopes){const e=n.scopes.map(e=>e.key);this.setState({scopes:e})}if(a&&a.length>0)return[o]=a,this.apiClient.getSwaggerByAPIIdAndEnvironment(t,o);if(i&&i.some(e=>e.clusterDetails.length>0)){const{clusterDetails:[{clusterName:e}]}=i.find(e=>e.clusterDetails.length>0);return o=e,this.apiClient.getSwaggerByAPIIdAndClusterName(t,e)}return r&&r.length>0?([o]=r,this.apiClient.getSwaggerByAPIIdAndLabel(t,o)):this.apiClient.getSwaggerByAPIId(t)}).then(e=>{c=e.obj;let d="OAUTH";return n.securityScheme.includes("oauth2")||(d=n.securityScheme.includes("api_key")?"API-KEY":"BASIC"),this.setState({api:n,swagger:c,environments:a,containerMngEnvironments:i,labels:r,productionAccessToken:void 0,sandboxAccessToken:void 0,selectedEnvironment:o,securitySchemeType:d}),null!=s?this.apiClient.getSubscriptions(t):null}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})})}setSecurityScheme(e){this.setState({securitySchemeType:e})}setSelectedEnvironment(e){this.setState({selectedEnvironment:e})}setProductionAccessToken(e){this.setState({productionAccessToken:e})}setSandboxAccessToken(e){this.setState({sandboxAccessToken:e})}setProductionApiKey(e){this.setState({productionApiKey:e})}setSandboxApiKey(e){this.setState({sandboxApiKey:e})}setUsername(e){this.setState({username:e})}setPassword(e){this.setState({password:e})}setSelectedKeyType(e,t,s){t?this.setState({selectedKeyType:e},this.updateAccessToken(s)):this.setState({selectedKeyType:e})}setSelectedKeyManager(e,t,s){t?this.setState({selectedKeyManager:e},this.updateAccessToken(s)):this.setState({selectedKeyManager:e})}setKeys(e){this.setState({keys:e})}updateAccessToken(e){const{selectedKeyType:t,selectedKeyManager:s,keys:n}=this.state;let a;n.get(s)&&n.get(s).keyType===t?(({accessToken:a}=n.get(s).token),"PRODUCTION"===t?this.setProductionAccessToken(a):this.setSandboxAccessToken(a)):K.a.get(e).then(e=>e.getKeys(t)).then(e=>{e.get(s)&&e.get(s).keyType===t&&({accessToken:a}=e.get(s).token),"PRODUCTION"===e.get(s).keyType?this.setProductionAccessToken(a):this.setSandboxAccessToken(a),this.setKeys(e)})}accessTokenProvider(){const{securitySchemeType:e,username:t,password:s,productionAccessToken:n,sandboxAccessToken:a,selectedKeyType:i,productionApiKey:r,sandboxApiKey:o}=this.state;if("BASIC"===e){return btoa(t+":"+s)}return"API-KEY"===e?"PRODUCTION"===i?r:o:"PRODUCTION"===i?n:a}updateSwagger(e){const{api:t,environments:s,containerMngEnvironments:n}=this.state;let a;(a=e?s.includes(e)?this.apiClient.getSwaggerByAPIIdAndEnvironment(t.id,e):n.some(t=>t.clusterDetails.length>0&&t.clusterDetails.some(t=>t.clusterName===e))?this.apiClient.getSwaggerByAPIIdAndClusterName(t.id,e):this.apiClient.getSwaggerByAPIIdAndLabel(t.id,e):this.apiClient.getSwaggerByAPIId(t.id)).then(e=>{this.setState({swagger:e.obj})})}render(){const{classes:e}=this.props,{api:t,notFound:s,swagger:n,securitySchemeType:c,selectedEnvironment:d,labels:l,environments:g,scopes:m,username:b,password:A,productionAccessToken:T,sandboxAccessToken:k,selectedKeyType:P,sandboxApiKey:K,productionApiKey:v,selectedKeyManager:x,containerMngEnvironments:O}=this.state,C=u.a.getUser(),N=JSON.stringify(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){I(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},n)),j="data:text/json;charset=utf-8, "+encodeURIComponent(N);if(null==t||null==n)return a.a.createElement(S.a,null);if(s)return"API Not found !";let M=!1,R=t.authorizationHeader?t.authorizationHeader:"Authorization";t&&t.securityScheme&&(M=t.securityScheme.includes("api_key"))&&"API-KEY"===c&&(R="apikey");const U=t.lifeCycleStatus&&"prototyped"===t.lifeCycleStatus.toLowerCase();return a.a.createElement(a.a.Fragment,null,a.a.createElement(o.a,{variant:"h4",className:e.titleSub,component:"h2"},a.a.createElement(i.a,{id:"Apis.Details.ApiConsole.ApiConsole.title",defaultMessage:"Try Out"})),a.a.createElement(h.a,{className:e.paper},a.a.createElement(r.a,{container:!0,className:e.grid},!U&&!C&&a.a.createElement(r.a,{item:!0,md:6},a.a.createElement(h.a,{className:e.userNotificationPaper},a.a.createElement(o.a,{variant:"h5",component:"h3"},a.a.createElement(p.a,null,"warning")," ",a.a.createElement(i.a,{id:"notice",defaultMessage:"Notice"})),a.a.createElement(o.a,{component:"p"},a.a.createElement(i.a,{id:"api.console.require.access.token",defaultMessage:"You need an access token to try the API. Please log in and subscribe to the API to generate an access token. If you already have an access token, please provide it below."}))))),a.a.createElement(w.a,{setSecurityScheme:this.setSecurityScheme,securitySchemeType:c,setSelectedEnvironment:this.setSelectedEnvironment,selectedEnvironment:d,productionAccessToken:T,setProductionAccessToken:this.setProductionAccessToken,sandboxAccessToken:k,setSandboxAccessToken:this.setSandboxAccessToken,swagger:n,labels:l,containerMngEnvironments:O,environments:g,scopes:m,setUsername:this.setUsername,setPassword:this.setPassword,username:b,password:A,setSelectedKeyType:this.setSelectedKeyType,selectedKeyType:P,setSelectedKeyManager:this.setSelectedKeyManager,selectedKeyManager:x,updateSwagger:this.updateSwagger,setKeys:this.setKeys,setProductionApiKey:this.setProductionApiKey,setSandboxApiKey:this.setSandboxApiKey,productionApiKey:v,sandboxApiKey:K,api:this.state.api}),a.a.createElement(r.a,{container:!0},a.a.createElement(r.a,{xs:10,item:!0}),a.a.createElement(r.a,{xs:2,item:!0},a.a.createElement("a",{href:j,download:"swagger.json"},a.a.createElement(o.a,{component:"span",className:e.buttonText},a.a.createElement(y.a,{className:e.buttonIcon}),a.a.createElement(i.a,{id:"Apis.Details.APIConsole.APIConsole.download.swagger",defaultMessage:"Swagger ( /swagger.json )"})))))),a.a.createElement(h.a,{className:e.swaggerUIPaper},a.a.createElement(f,{api:this.state.api,accessTokenProvider:this.accessTokenProvider,spec:n,authorizationHeader:R,securitySchemeType:c})))}}v.propTypes={classes:d.a.shape({paper:d.a.string.isRequired,titleSub:d.a.string.isRequired,grid:d.a.string.isRequired,userNotificationPaper:d.a.string.isRequired,buttonIcon:d.a.string.isRequired}).isRequired},v.contextType=m.a;t.default=Object(l.a)(e=>({buttonIcon:{marginRight:10},paper:{margin:e.spacing(1),padding:e.spacing(1)},grid:{marginTop:e.spacing(4),marginBottom:e.spacing(4),paddingRight:e.spacing(2),justifyContent:"center"},userNotificationPaper:{padding:e.spacing(2)},titleSub:{marginLeft:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(2),color:e.palette.getContrastText(e.palette.background.default)},swaggerUIPaper:{backgroundColor:e.custom.apiDetailPages.swaggerUIBackground},buttonText:{color:e.palette.getContrastText(e.palette.background.default),display:"flex"}}))(v)}}]);
//# sourceMappingURL=APIConsole.2e8bad8f0aa05c463479.bundle.js.map